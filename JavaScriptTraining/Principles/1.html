<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel = "stylesheet" href = "Style.css">
    <script src = "three.min.js"></script>
</head>
<body>
</body>
</html>

    <script>



        let scene, camera, renderer, cube, sphere, torus;
        let ADD = 0.09;
        let spheres = [];



        let createCube = function(){
            let geometry = new THREE.BoxGeometry(1,1,1);
            let material = new THREE.MeshBasicMaterial({color : 0x00a1cb});
            cube = new THREE.Mesh(geometry, material);
            scene.add(cube);

        };

        let createTorus = function() {
            let geometry = new THREE.SphereGeometry();
            let material = new THREE.MeshBasicMaterial({color: 0xffffff, wireframe:true});
            torus = new THREE.Mesh(geometry, material);
            scene.add(torus);

        };


        // === Rain of Donuts ===

        let randomRange = function(from, to){
          let x = Math.random() * (to - from);
          return x + from;
        };

        let createSphere = function(x, y, z) {
            let geometry = new THREE.SphereGeometry(5,30,30);
            let material = new THREE.MeshBasicMaterial({color : Math.random() * 0xffffff});
            let sphere = new THREE.Mesh(geometry, material);
            // sphere.position.x = randomRange(0.5,0.5);
            // sphere.position.z = 1;
            // sphere.position.y = randomRange(-0.5,0.5);

            sphere.position.x = x;
            sphere.position.y = y;
           // sphere.position.z = z;
            scene.add(sphere);
            spheres.push(sphere);

        };

        let createBang = function(){


        };


        function get3dPointZAxis(event)
        {
            var vector = new THREE.Vector3(
                ( event.clientX / window.innerWidth ) * 2 - 1,
                - ( event.clientY / window.innerHeight ) * 2 + 1,
                0.5 );
            projector.unprojectVector( vector, camera );
            var dir = vector.sub( camera.position ).normalize();
            var distance = - camera.position.z / dir.z;
            var pos = camera.position.clone().add( dir.multiplyScalar( distance ) );
            return pos;
        }



        let oneMouseClick = function(event){

            // ======= Most important (maybe for me ) ======
            // I wasn't able  to do what i wanted with simple raycaster class fromm THREEjs Library
            //
            // I got coordinates by calling client X and Y,
            // then transformed position from 2D (width and height in pixels)
            // to 3D coordinates (-1,1) on X and Y
            // let planeZ = new THREE.Plane(new THREE.Vector3(0, 0, 1), 0);
            //
            // let x = (e.clientX/window.innerWidth)*2 -1;
            // let y = (e.clientY/window.innerHeight)*2 +1;


            // C
            // var raycaster = new THREE.Raycaster();
            // var mouse = new THREE.Vector2();
            // var vec = raycaster.ray.intersectPlane(new THREE.Plane(new THREE.Vector3(0, 1, 0)));
            // mouse.x = ( e.clientX / renderer.domElement.width ) * 2 - 1;
            // mouse.y = - ( e.clientY / renderer.domElement.height ) * 2 + 1;
            // raycaster.setFromCamera( mouse, camera );




            // var vec = new THREE.Vector3(); // create once and reuse
            // var pos = new THREE.Vector3(); // create once and reuse
            //
            // vec.set(x, y, 0.5 );
            //
            // vec.unproject( camera );
            //
            // vec.sub( camera.position ).normalize();
            //
            // var distance = - camera.position.z / vec.z;
            //
            // pos.copy( camera.position ).add( vec.multiplyScalar( distance ) );
            // // mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            // // mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            // event.preventDefault();
            // let x = (event.clientX / window.innerWidth) * 2 - 1;
            // let y = - (event.clientY / window.innerHeight) * 2 + 1
            //
            //
            // let vector = new THREE.Vector3(x, y, 0.5);
            // vector.unproject( camera );
            // let dir = vector.sub( camera.position ).normalize();
            // let distance = - camera.position.z / dir.z;
            // let pos = camera.position.clone().add( dir.multiplyScalar( distance ) );



            createSphere(pos.x,pos.y);
            //console.log("x: " + pos.x + ", y: " + pos.y);


        };











        let init = function(){
            // create the scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000000);

            // create and locate the camera

            camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 1, 1000);

            camera.position.set(0, 0, 5);
            camera.lookAt(scene.position);




            //create the renderer

            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);

            document.body.appendChild(renderer.domElement);

            document.addEventListener("click", oneMouseClick, false);



        };

        //main animation loop calls 50-60 a second

        let mainLoop = function(){

            // === Cube ====

            //cube.position.y += ADD;
            // cube.rotation.z -= ADD;

            // if(cube.position.x <= -3 || cube.position.x >= 3)
            //     ADD *= -1;

            // === Sphere ====

            // sphere.rotation.x  += ADD;
            // sphere.rotation.y  += ADD;

            //=== torus ====

            // torus.rotation.x += ADD;
            // torus.rotation.y += ADD;


            // //==== donut fall ====
            // let x = Math.random();
            // if (x<0.5)
            // createDonut();
            //
            // donuts.forEach(d => d.position.y -=ADD);


            renderer.render(scene,camera);
            requestAnimationFrame(mainLoop);

        };

        //////////////////////////////
        init();
        mainLoop();



    </script>